<div class="products-container">
  <h2>Products</h2>
  <p>This is the products micro frontend component.</p>
  @if (isAuthenticated()) {
    <div class="user-info">
      <div class="info-card">
        <h3>User Information from Shared Store</h3>
        <p class="username">
          <strong>Logged in as:</strong> 
          <span class="highlight">{{ userName() }}</span>
        </p>
        <p class="note">
          ‚ÑπÔ∏è This username is retrieved from the global NgRx store managed by the shell application.
        </p>
        
        <div class="update-section">
          <button class="update-btn" (click)="toggleUpdateForm()">
            {{ showUpdateForm() ? 'Cancel' : 'Update Username' }}
          </button>
          
          @if (showUpdateForm()) {
            <div class="update-form">
              <input 
                type="text" 
                [value]="newUsername()"
                (input)="newUsername.set($any($event).target.value)"
                placeholder="Enter new username (min 3 chars)"
                class="username-input"
                (keyup.enter)="updateUsername()"
              />
              <button 
                class="save-btn" 
                (click)="updateUsername()"
                [disabled]="newUsername().trim().length < 3"
              >
                Save Changes
              </button>
            </div>
          }
          
          @if (showUpdateForm()) {
            <p class="update-note">
              üí° This will update the username in the shell's global store, and all MFEs will see the change!
            </p>
          }
        </div>
      </div>
    </div>
  }

  <div class="products-list">
    <h3>Available Products</h3>
    <div class="product-grid">
      <div class="product-card">
        <h4>Product 1</h4>
        <p>Description of product 1</p>
        <button>View Details</button>
      </div>
      <div class="product-card">
        <h4>Product 2</h4>
        <p>Description of product 2</p>
        <button>View Details</button>
      </div>
      <div class="product-card">
        <h4>Product 3</h4>
        <p>Description of product 3</p>
        <button>View Details</button>
      </div>
    </div>
  </div>
</div>

